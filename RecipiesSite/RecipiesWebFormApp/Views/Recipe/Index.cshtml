@using InventoryManagementMVC.Extensions
@using InventoryManagementMVC.Models;

@model IEnumerable<RecipeViewModel>

@(
 Html.Kendo().Grid(Model)
     .Name("RecipeViewModelGrid")
            .AddDefaultOptions()
            .DataSource(dataSource => dataSource
                .Ajax()
                .Create("Create", "Recipe")
                    .Read("Read", "Recipe")
                    .Update("Update", "Recipe")
                    .Destroy("Destroy", "Recipe"))
                    .ClientDetailTemplateId("template")
)

<script id="template" type="text/kendo-tmpl">
    @(Html.Kendo().Grid<ProductIngredientViewModel>()
                          .Name("ProductIngredientViewModelGrid_#=RecipeId#")
          .AddDefaultOptions(true, false)
          .DataSource(dataSource => dataSource
              .Ajax()
              .Batch(true)
              .PageSize(5)
              .Model(m => m.Id(p => p.ProductIngredientId))
                              .Read(read => read.Action("Read", "ProductIngredient", new { recipeId = "#=RecipeId#" }))
                                      .Create("Create", "ProductIngredient", new { recipeId = "#=RecipeId#" })
                      .Update("Update", "ProductIngredient")
                      .Destroy("Destroy", "ProductIngredient")
          )
          .ToClientTemplate()
          .ToMvcClientTemplate()        
    )
</script>
